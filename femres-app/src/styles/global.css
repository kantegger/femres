@import "tailwindcss";

/* Enable dark mode variant for Tailwind CSS v4 */
@variant dark (&:where(.dark, .dark *));

/* Prose styles for markdown content */
@utility prose {
  color: var(--color-gray-700);
  max-width: 65ch;
  
  /* Headings */
  & h1, & h2, & h3, & h4, & h5, & h6 {
    color: var(--color-gray-900);
    font-weight: 700;
    line-height: 1.25;
  }
  
  & h1 {
    font-size: 1.875rem;
    margin-bottom: 2rem;
    padding-bottom: 1rem;
    border-bottom: 1px solid var(--color-gray-200);
    margin-top: 0;
  }
  
  & h2 {
    font-size: 1.25rem;
    color: var(--color-purple-700);
    margin-bottom: 1.25rem;
    margin-top: 3rem;
  }

  & h3 {
    font-size: 1.125rem;
    color: var(--color-gray-800);
    margin-bottom: 1rem;
    margin-top: 2rem;
  }

  & h4 {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-gray-700);
    margin-bottom: 0.75rem;
    margin-top: 1.5rem;
  }

  & h5 {
    font-size: 0.875rem;
    font-weight: 600;
    color: var(--color-gray-700);
    margin-bottom: 0.5rem;
    margin-top: 1rem;
  }
  
  /* Paragraphs */
  & p {
    color: var(--color-gray-700);
    line-height: 1.75;
    margin-bottom: 1.5rem;
  }
  
  /* Links */
  & a {
    color: var(--color-purple-600);
    text-decoration: none;
    font-weight: 500;
  }
  
  & a:hover {
    text-decoration: underline;
    color: var(--color-purple-800);
  }
  
  /* Strong and emphasis */
  & strong {
    color: var(--color-gray-900);
    font-weight: 600;
  }
  
  & em {
    color: var(--color-gray-600);
    font-style: italic;
  }
  
  /* Blockquotes */
  & blockquote {
    border-left: 4px solid var(--color-purple-500);
    background-color: var(--color-purple-50);
    padding: 2rem 1rem 0.5rem 2rem;
    border-radius: 0 0.5rem 0.5rem 0;
    font-style: normal;
    color: var(--color-gray-700);
    margin: 2rem 0 1.5rem 0;
  }
  
  /* Lists */
  & ul, & ol {
    margin: 1.5rem 0;
    padding-left: 1.5rem;
  }
  
  & li {
    margin: 0.5rem 0;
    color: var(--color-gray-700);
    line-height: 1.75;
  }
  
  /* Code */
  & code {
    color: var(--color-purple-600);
    background-color: var(--color-purple-50);
    padding: 0.25rem 0.5rem;
    border-radius: 0.375rem;
    font-family: ui-monospace, SFMono-Regular, 'SF Mono', Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace;
    font-size: 0.875rem;
  }
  
  & pre {
    background-color: var(--color-gray-900);
    color: var(--color-gray-100);
    border-radius: 0.5rem;
    padding: 1rem;
    overflow-x: auto;
    margin: 2rem 0;
  }
  
  & pre code {
    background-color: transparent;
    color: inherit;
    padding: 0;
    border-radius: 0;
  }
  
  /* Images */
  & img {
    border-radius: 0.5rem;
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    margin: 2rem auto;
  }
  
  /* Horizontal rules */
  & hr {
    border-color: var(--color-gray-300);
    margin: 3rem 0;
  }
}

@utility prose-lg {
  font-size: 1.125rem;
  line-height: 1.7;

  & h1 { font-size: 2.75rem; }
  & h2 { font-size: 1.875rem; }
  & h3 { font-size: 1.5rem; }
  & h4 { font-size: 1.25rem; }
  & h5 { font-size: 1.125rem; }
  & p { margin-bottom: 1.75rem; }
}

@utility max-w-none {
  max-width: none;
}

/* Dark mode prose styles */
.dark .prose {
    color: var(--color-gray-300);
    
    & h1, & h2, & h3, & h4, & h5, & h6 {
      color: var(--color-white);
    }
    
    & h2 {
      color: var(--color-purple-300);
    }
    
    & h3 {
      color: var(--color-gray-200);
    }
    
    & h4 {
      color: var(--color-gray-300);
    }

    & h5 {
      color: var(--color-gray-400);
    }

    & p {
      color: var(--color-gray-300);
    }
    
    & a {
      color: var(--color-purple-400);
    }
    
    & a:hover {
      color: var(--color-purple-300);
    }
    
    & strong {
      color: var(--color-white);
    }
    
    & em {
      color: var(--color-gray-400);
    }
    
    & blockquote {
      background-color: var(--color-purple-900);
      background-color: color-mix(in srgb, var(--color-purple-900) 20%, transparent);
      color: var(--color-gray-300);
    }
    
    & li {
      color: var(--color-gray-300);
    }
    
    & code {
      color: var(--color-purple-400);
      background-color: var(--color-purple-900);
      background-color: color-mix(in srgb, var(--color-purple-900) 20%, transparent);
    }
    
    & hr {
      border-color: var(--color-gray-600);
    }
    
    & h1 {
      border-color: var(--color-gray-700);
    }
}

/* Custom animations */
@keyframes blob {
  0% {
    transform: translate(0px, 0px) scale(1);
  }
  33% {
    transform: translate(30px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-20px, 20px) scale(0.9);
  }
  100% {
    transform: translate(0px, 0px) scale(1);
  }
}

.animate-blob {
  animation: blob 7s infinite;
}

.animation-delay-2000 {
  animation-delay: 2s;
}

.animation-delay-4000 {
  animation-delay: 4s;
}

/* Improved scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  @apply bg-gray-100 dark:bg-gray-800;
}

::-webkit-scrollbar-thumb {
  @apply bg-purple-400 hover:bg-purple-500 rounded-full;
}

/* Enhanced focus states */
*:focus-visible {
  @apply outline-2 outline-purple-500 outline-offset-2;
}

/* Remove purple focus outline for form elements */
select:focus-visible,
input:focus-visible {
  @apply outline-0;
}

/* Smooth transitions for dark mode */
* {
  transition-property: color, background-color, border-color;
  transition-duration: 200ms;
  transition-timing-function: ease-in-out;
}

/* English hyphenation for better text justification */
[lang="en"] .prose,
.prose[lang="en"] {
  hyphens: auto;
  -webkit-hyphens: auto;
  -ms-hyphens: auto;
  text-align: justify;
}

@utility hyphens-auto {
  hyphens: auto;
  -webkit-hyphens: auto;
  -ms-hyphens: auto;
}

@utility text-justify {
  text-align: justify;
}

/* 统一的磨玻璃效果系统 */
@utility glass {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

@utility glass-light {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

@utility glass-medium {
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.25);
}

@utility glass-strong {
  background: rgba(255, 255, 255, 0.2);
  backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.3);
}

/* 暗色模式下的磨玻璃效果 */
.dark .glass {
  background: rgba(0, 0, 0, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

.dark .glass-light {
  background: rgba(0, 0, 0, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.05);
}

.dark .glass-medium {
  background: rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.15);
}

.dark .glass-strong {
  background: rgba(0, 0, 0, 0.2);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* 页面Header的轻微磨玻璃效果 */
@utility glass-header {
  background: linear-gradient(135deg, rgba(147, 51, 234, 0.08), rgba(219, 39, 119, 0.08));
  backdrop-filter: blur(10px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

.dark .glass-header {
  background: linear-gradient(135deg, rgba(147, 51, 234, 0.15), rgba(219, 39, 119, 0.15));
  border-bottom: 1px solid rgba(255, 255, 255, 0.05);
}

/* 卡片的磨玻璃边框效果 */
@utility glass-card {
  background: rgba(255, 255, 255, 0.02);
  backdrop-filter: blur(4px);
  border: 1px solid rgba(255, 255, 255, 0.08);
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.dark .glass-card {
  background: rgba(0, 0, 0, 0.02);
  border: 1px solid rgba(255, 255, 255, 0.04);
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.3),
    0 2px 4px -1px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

/* 磨玻璃悬浮效果 */
@utility glass-hover {
  transition: all 0.3s ease;
}

.glass-hover:hover {
  background: rgba(255, 255, 255, 0.15);
  backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.25);
  transform: translateY(-2px);
  box-shadow:
    0 10px 25px -5px rgba(0, 0, 0, 0.1),
    0 10px 10px -5px rgba(0, 0, 0, 0.04),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
}

.dark .glass-hover:hover {
  background: rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow:
    0 10px 25px -5px rgba(0, 0, 0, 0.4),
    0 10px 10px -5px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* 首页Hero专用样式 - 保持其独特的动态效果 */
@utility hero-glass {
  position: relative;
  overflow: hidden;
}

.hero-glass::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(2px);
  pointer-events: none;
  z-index: 1;
}

/* 确保Hero内容在磨玻璃层之上 */
.hero-content {
  position: relative;
  z-index: 2;
}

/* 增强首页卡片的磨玻璃效果，但保持微妙 */
@utility hero-card-glass {
  background: rgba(255, 255, 255, 0.04);
  backdrop-filter: blur(6px);
  border: 1px solid rgba(255, 255, 255, 0.06);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.08),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);
}

.dark .hero-card-glass {
  background: rgba(0, 0, 0, 0.04);
  border: 1px solid rgba(255, 255, 255, 0.03);
  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.04);
}