---
export interface Props {
  adSlot: string;
  adFormat?: 'auto' | 'fluid' | 'rectangle' | 'vertical' | 'horizontal' | 'autorelaxed';
  adLayout?: string | 'in-article';
  className?: string;
  style?: string;
  fullWidth?: boolean;
}

const {
  adSlot,
  adFormat = 'auto',
  adLayout,
  className = '',
  style = adLayout === 'in-article' ? 'display:block; text-align:center;' : 'display:block',
  fullWidth = true
} = Astro.props;

// Only show ads in production
const isProd = import.meta.env.PROD;
---

{isProd && (
  <div class={`adsense-container ${className}`}>
    <ins
      class="adsbygoogle"
      style={style}
      data-ad-client="ca-pub-2079107911432321"
      data-ad-slot={adSlot}
      data-ad-format={adFormat}
      data-ad-layout={adLayout}
      data-full-width-responsive={fullWidth ? "true" : "false"}
    ></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
)}

<style>
  .adsense-container {
    margin: 1.5rem 0;
    min-height: 100px;
    background: linear-gradient(45deg, #f3f4f6 25%, transparent 25%, transparent 75%, #f3f4f6 75%, #f3f4f6),
                linear-gradient(45deg, #f3f4f6 25%, transparent 25%, transparent 75%, #f3f4f6 75%, #f3f4f6);
    background-size: 20px 20px;
    background-position: 0 0, 10px 10px;
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
  }

  @media (prefers-color-scheme: dark) {
    .adsense-container {
      background: linear-gradient(45deg, #1f2937 25%, transparent 25%, transparent 75%, #1f2937 75%, #1f2937),
                  linear-gradient(45deg, #1f2937 25%, transparent 25%, transparent 75%, #1f2937 75%, #1f2937);
    }
  }

  /* Production styles - hide placeholder background */
  :global(.adsbygoogle[data-ad-status="filled"]) ~ .adsense-container {
    background: transparent !important;
    padding: 0 !important;
  }
</style>